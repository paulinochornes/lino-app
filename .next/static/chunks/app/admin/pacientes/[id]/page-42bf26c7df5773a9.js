(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[641],{3864:(e,s,n)=>{Promise.resolve().then(n.bind(n,6311))},4409:(e,s,n)=>{"use strict";n.d(s,{N:()=>a});var t=n(5647);if("undefined"==typeof fetch)throw Error('\uD83D\uDEA8 "fetch" no est\xe1 definido en este entorno.');let a=(0,t.UU)("https://pogsyskvqfxanmjplbxn.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBvZ3N5c2t2cWZ4YW5tanBsYnhuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMzMTIyMDUsImV4cCI6MjA2ODg4ODIwNX0.NbAtNtcmBakwvmbgR2jLuOlZvAvavsZ3qzFgUZy1Czc")},5695:(e,s,n)=>{"use strict";var t=n(8999);n.o(t,"useParams")&&n.d(s,{useParams:function(){return t.useParams}}),n.o(t,"useRouter")&&n.d(s,{useRouter:function(){return t.useRouter}})},6311:(e,s,n)=>{"use strict";n.r(s),n.d(s,{default:()=>c});var t=n(5155),a=n(2115),r=n(5695),o=n(4409),i=n(6874),l=n.n(i);function c(){let{id:e}=(0,r.useParams)(),[s,n]=(0,a.useState)(null),[i,c]=(0,a.useState)([]),[u,d]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{(async()=>{let{data:s}=await o.N.from("pacientes").select("id, nombre, telefono").eq("id",e).single(),{data:t}=await o.N.from("consultas").select("id, fecha, tratamiento ( nombre )").eq("paciente_id",e).order("fecha",{ascending:!1});n(s),c(t||[]),d(!1)})()},[e]),u)?(0,t.jsx)("p",{className:"p-6",children:"Cargando datos..."}):s?(0,t.jsxs)("main",{className:"min-h-screen p-6 bg-lino-fondo text-lino-texto",children:[(0,t.jsxs)("h1",{className:"text-2xl font-bold mb-2",children:["\uD83D\uDC64 ",s.nombre]}),(0,t.jsxs)("p",{className:"mb-4",children:["\uD83D\uDCDE ",s.telefono]}),(0,t.jsx)(l(),{href:"/admin/pacientes/".concat(e,"/nueva-consulta"),className:"inline-block mb-6 text-lino-acento underline hover:text-purple-600",children:"➕ Agendar nueva consulta"}),(0,t.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"\uD83D\uDDD3️ Historial de consultas"}),i.length?(0,t.jsx)("ul",{className:"space-y-2",children:i.map(e=>{var s,n,a,r;return(0,t.jsxs)("li",{className:"p-4 bg-white border border-lino-borde rounded-xl",children:[(0,t.jsx)("strong",{children:new Date(e.fecha).toLocaleDateString()}),(0,t.jsx)("br",{}),(s=e.tratamiento)?Array.isArray(s)?null!=(a=null==(n=s[0])?void 0:n.nombre)?a:"Sin datos":null!=(r=s.nombre)?r:"Sin datos":"Sin datos"]},e.id)})}):(0,t.jsx)("p",{children:"No hay consultas registradas."})]}):(0,t.jsx)("p",{className:"p-6",children:"Paciente no encontrado."})}}},e=>{e.O(0,[647,874,441,964,358],()=>e(e.s=3864)),_N_E=e.O()}]);