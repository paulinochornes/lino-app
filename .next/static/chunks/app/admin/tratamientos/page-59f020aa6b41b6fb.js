(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[444],{1701:(e,r,i)=>{"use strict";i.d(r,{$:()=>o});var n=i(5155);let s=function(){for(var e,r,i=0,n="",s=arguments.length;i<s;i++)(e=arguments[i])&&(r=function e(r){var i,n,s="";if("string"==typeof r||"number"==typeof r)s+=r;else if("object"==typeof r)if(Array.isArray(r)){var o=r.length;for(i=0;i<o;i++)r[i]&&(n=e(r[i]))&&(s&&(s+=" "),s+=n)}else for(n in r)r[n]&&(s&&(s+=" "),s+=n);return s}(e))&&(n&&(n+=" "),n+=r);return n};function o(e){let{children:r,className:i,variant:o="primary",...t}=e;return(0,n.jsx)("button",{...t,className:s("px-4 py-2 rounded-xl font-semibold transition duration-200","primary"===o?"bg-lino-acento text-white hover:bg-purple-700":"bg-lino-fondo-secundario text-lino-texto hover:bg-lino-fondo",i),children:r})}},4409:(e,r,i)=>{"use strict";i.d(r,{N:()=>s});var n=i(5647);if("undefined"==typeof fetch)throw Error('\uD83D\uDEA8 "fetch" no est\xe1 definido en este entorno.');let s=(0,n.UU)("https://pogsyskvqfxanmjplbxn.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBvZ3N5c2t2cWZ4YW5tanBsYnhuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMzMTIyMDUsImV4cCI6MjA2ODg4ODIwNX0.NbAtNtcmBakwvmbgR2jLuOlZvAvavsZ3qzFgUZy1Czc")},4783:(e,r,i)=>{Promise.resolve().then(i.bind(i,7502))},7502:(e,r,i)=>{"use strict";i.r(r),i.d(r,{default:()=>a});var n=i(5155),s=i(2115),o=i(4409),t=i(1701);function a(){let[e,r]=(0,s.useState)([]),[i,a]=(0,s.useState)(null),[l,c]=(0,s.useState)({nombre:"",descripcion:"",precio:""}),[d,m]=(0,s.useState)(""),u=async()=>{let{data:e,error:i}=await o.N.from("tratamientos").select("*").order("nombre",{ascending:!0});i?console.error(i):r(e)};(0,s.useEffect)(()=>{u()},[]);let p=e=>{let{name:r,value:i}=e.target;c(e=>({...e,[r]:i}))},b=()=>{c({nombre:"",descripcion:"",precio:""}),a(null),m("")},f=async e=>{let r;if(e.preventDefault(),!l.nombre)return void m("El nombre es obligatorio.");let n={nombre:l.nombre,descripcion:l.descripcion||null,precio:l.precio?parseFloat(l.precio):null};(r=i?await o.N.from("tratamientos").update(n).eq("id",i):await o.N.from("tratamientos").insert(n)).error?m(r.error.message):(await u(),b())},x=async e=>{if(!confirm("\xbfEliminar este tratamiento?"))return;let{error:r}=await o.N.from("tratamientos").delete().eq("id",e);r?alert("Error al eliminar"):await u()};return(0,n.jsxs)("main",{className:"min-h-screen p-6 bg-lino-fondo text-lino-texto",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"\uD83E\uDDF4 Tratamientos"}),(0,n.jsxs)("form",{onSubmit:f,className:"space-y-4 mb-8 max-w-md",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block mb-1 font-medium",children:"Nombre *"}),(0,n.jsx)("input",{name:"nombre",value:l.nombre,onChange:p,className:"w-full p-2 border border-lino-borde rounded"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block mb-1 font-medium",children:"Descripci\xf3n"}),(0,n.jsx)("textarea",{name:"descripcion",value:l.descripcion,onChange:p,className:"w-full p-2 border border-lino-borde rounded"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block mb-1 font-medium",children:"Precio"}),(0,n.jsx)("input",{name:"precio",type:"number",value:l.precio,onChange:p,className:"w-full p-2 border border-lino-borde rounded",min:"0",step:"0.01"})]}),d&&(0,n.jsx)("p",{className:"text-red-600",children:d}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(t.$,{type:"submit",children:i?"\uD83D\uDCBE Guardar cambios":"➕ Agregar tratamiento"}),i&&(0,n.jsx)(t.$,{variant:"secondary",type:"button",onClick:b,children:"❌ Cancelar edici\xf3n"})]})]}),(0,n.jsx)("ul",{className:"space-y-2",children:e.map(e=>(0,n.jsxs)("li",{className:"p-4 bg-white border border-lino-borde rounded-xl flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:e.nombre}),(0,n.jsx)("br",{}),e.descripcion&&(0,n.jsx)("span",{className:"text-sm",children:e.descripcion}),(0,n.jsx)("br",{}),null!==e.precio&&void 0!==e.precio&&(0,n.jsxs)("span",{className:"text-sm",children:["\uD83D\uDCB2 ",e.precio.toFixed(2)]})]}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(t.$,{onClick:()=>{var r;a(e.id),c({nombre:e.nombre,descripcion:e.descripcion||"",precio:(null==(r=e.precio)?void 0:r.toString())||""})},variant:"secondary",children:"✏️ Editar"}),(0,n.jsx)(t.$,{onClick:()=>x(e.id),variant:"secondary",children:"\uD83D\uDDD1️ Eliminar"})]})]},e.id))})]})}}},e=>{e.O(0,[647,441,964,358],()=>e(e.s=4783)),_N_E=e.O()}]);