(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[774],{1e3:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var s=a(5155),r=a(2115),n=a(5695),o=a(4409),i=a(1701);function l(){let e=(0,n.useRouter)(),{id:t}=(0,n.useParams)(),[a,l]=(0,r.useState)(""),[u,c]=(0,r.useState)(""),[d,m]=(0,r.useState)([]),[f,h]=(0,r.useState)(!0),[b,p]=(0,r.useState)("");(0,r.useEffect)(()=>{(async()=>{let[{data:e},{data:a}]=await Promise.all([o.N.from("consultas").select("fecha, tratamiento_id").eq("id",t).single(),o.N.from("tratamientos").select("id, nombre")]);e&&(l(e.fecha.slice(0,16)),c(e.tratamiento_id)),a&&m(a),h(!1)})()},[t]);let x=async s=>{if(s.preventDefault(),!a||!u)return void p("Complet\xe1 todos los campos");let{error:r}=await o.N.from("consultas").update({fecha:a,tratamiento_id:u}).eq("id",t);r?p(r.message):e.push("/admin/turnos")};return(0,s.jsxs)("main",{className:"min-h-screen p-6 bg-lino-fondo text-lino-texto",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"✏️ Editar turno"}),f?(0,s.jsx)("p",{children:"Cargando datos..."}):(0,s.jsxs)("form",{onSubmit:x,className:"space-y-4 max-w-md",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block mb-1 font-medium",children:"Fecha y hora"}),(0,s.jsx)("input",{type:"datetime-local",value:a,onChange:e=>l(e.target.value),className:"w-full p-2 border border-lino-borde rounded"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block mb-1 font-medium",children:"Tratamiento"}),(0,s.jsxs)("select",{value:u,onChange:e=>c(e.target.value),className:"w-full p-2 border border-lino-borde rounded",children:[(0,s.jsx)("option",{value:"",children:"Seleccionar tratamiento"}),d.map(e=>(0,s.jsx)("option",{value:e.id,children:e.nombre},e.id))]})]}),b&&(0,s.jsx)("p",{className:"text-red-600",children:b}),(0,s.jsx)(i.$,{type:"submit",children:"Guardar cambios"})]})]})}},1701:(e,t,a)=>{"use strict";a.d(t,{$:()=>n});var s=a(5155);let r=function(){for(var e,t,a=0,s="",r=arguments.length;a<r;a++)(e=arguments[a])&&(t=function e(t){var a,s,r="";if("string"==typeof t||"number"==typeof t)r+=t;else if("object"==typeof t)if(Array.isArray(t)){var n=t.length;for(a=0;a<n;a++)t[a]&&(s=e(t[a]))&&(r&&(r+=" "),r+=s)}else for(s in t)t[s]&&(r&&(r+=" "),r+=s);return r}(e))&&(s&&(s+=" "),s+=t);return s};function n(e){let{children:t,className:a,variant:n="primary",...o}=e;return(0,s.jsx)("button",{...o,className:r("px-4 py-2 rounded-xl font-semibold transition duration-200","primary"===n?"bg-lino-acento text-white hover:bg-purple-700":"bg-lino-fondo-secundario text-lino-texto hover:bg-lino-fondo",a),children:t})}},3279:(e,t,a)=>{Promise.resolve().then(a.bind(a,1e3))},4409:(e,t,a)=>{"use strict";a.d(t,{N:()=>r});var s=a(5647);if("undefined"==typeof fetch)throw Error('\uD83D\uDEA8 "fetch" no est\xe1 definido en este entorno.');let r=(0,s.UU)("https://pogsyskvqfxanmjplbxn.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBvZ3N5c2t2cWZ4YW5tanBsYnhuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMzMTIyMDUsImV4cCI6MjA2ODg4ODIwNX0.NbAtNtcmBakwvmbgR2jLuOlZvAvavsZ3qzFgUZy1Czc")},5695:(e,t,a)=>{"use strict";var s=a(8999);a.o(s,"useParams")&&a.d(t,{useParams:function(){return s.useParams}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})}},e=>{e.O(0,[647,441,964,358],()=>e(e.s=3279)),_N_E=e.O()}]);